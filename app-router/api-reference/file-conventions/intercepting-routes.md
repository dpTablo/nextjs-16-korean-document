# 인터셉팅 라우트 (Intercepting Routes)

## 개요

인터셉팅 라우트는 애플리케이션의 다른 부분에서 현재 레이아웃 내에 라우트를 로드할 수 있게 합니다. 사용자가 다른 컨텍스트로 전환하지 않고도 라우트의 콘텐츠를 표시하려는 경우 유용합니다.

### 사용 사례

예를 들어, 피드에서 사진을 클릭할 때 모달로 사진을 표시하면서 피드를 오버레이할 수 있습니다. 이 경우 Next.js는 `/photo/123` 라우트를 인터셉트하고, URL을 마스킹하며, `/feed` 위에 오버레이합니다.

### 하드 네비게이션 vs 소프트 네비게이션

- **소프트 네비게이션:** 클라이언트 사이드 네비게이션 시 인터셉트 발생
- **하드 네비게이션:** 공유 가능한 URL 클릭이나 페이지 새로고침 시 모달 대신 전체 사진 페이지 렌더링

## 규칙 (Convention)

인터셉팅 라우트는 `(..)` 규칙으로 정의되며, 상대 경로 `../`와 유사하지만 라우트 세그먼트용입니다.

### 매처 유형

| 규칙 | 설명 |
|------|------|
| `(.)` | 동일 레벨의 세그먼트 매칭 |
| `(..)` | 한 레벨 위의 세그먼트 매칭 |
| `(..)(..)` | 두 레벨 위의 세그먼트 매칭 |
| `(...)` | `app` 디렉토리의 루트 세그먼트 매칭 |

### 예시

`feed` 세그먼트 내에서 `photo` 세그먼트를 인터셉트하려면 `(..)photo` 디렉토리를 만듭니다.

```
app/
├── feed/
│   ├── (..)photo/
│   │   └── [id]/
│   │       └── page.js
│   └── page.js
├── photo/
│   └── [id]/
│       └── page.js
└── layout.js
```

> **참고:** `(..)` 규칙은 파일시스템이 아닌 **라우트 세그먼트**를 기반으로 합니다. `@slot` 폴더(병렬 라우트)는 고려하지 않습니다.

## 예제

### 모달 (Modals)

인터셉팅 라우트는 [병렬 라우트](/app-router/api-reference/file-conventions/parallel-routes.md)와 함께 사용하여 모달을 생성할 수 있습니다.

#### 모달로 해결되는 과제

- 모달 콘텐츠를 **URL로 공유 가능**하게 만들기
- 페이지 새로고침 시 **컨텍스트 보존** (모달이 닫히지 않음)
- 역방향 네비게이션 시 **모달 닫기** (이전 라우트로 이동하지 않음)
- 전방향 네비게이션 시 **모달 재열기**

#### 구현 예시

```tsx filename="app/photo/[id]/page.tsx"
// 전체 사진 페이지 (하드 네비게이션 시)
export default function PhotoPage({ params }: { params: { id: string } }) {
  return <Photo id={params.id} />
}
```

```tsx filename="app/feed/(..)photo/[id]/page.tsx"
// 인터셉트된 사진 모달 (소프트 네비게이션 시)
import { Modal } from '@/components/modal'

export default function PhotoModal({ params }: { params: { id: string } }) {
  return (
    <Modal>
      <Photo id={params.id} />
    </Modal>
  )
}
```

#### 사용 사례

- 상단 네비게이션에서 로그인 모달 열기 (별도 `/login` 페이지도 존재)
- 사이드 모달에서 쇼핑 카트 열기
- 갤러리에서 사진 모달 열기

> **참고:** `@modal`은 세그먼트가 아닌 **슬롯**이기 때문에 `(..)` 매처를 사용할 수 있습니다. 즉, 파일시스템 상으로는 2레벨 위이지만 라우트 세그먼트로는 1레벨 위입니다.

## 다음 단계

- [병렬 라우트](/app-router/api-reference/file-conventions/parallel-routes.md) - 동일 뷰에서 하나 이상의 페이지를 동시에 렌더링하는 패턴
