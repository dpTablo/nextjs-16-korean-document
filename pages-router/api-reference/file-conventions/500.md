# 500.js

`pages/500.js` 파일은 커스텀 500 에러 페이지를 정의합니다. 이 파일은 빌드 시 정적으로 생성됩니다.

## 기본 사용법

`pages/500.js` 파일을 생성하여 커스텀 500 페이지를 정의할 수 있습니다:

```jsx filename="pages/500.js"
export default function Custom500() {
  return <h1>500 - 서버 에러가 발생했습니다</h1>
}
```

## `getStaticProps`와 함께 사용

빌드 시 데이터를 가져와야 하는 경우 `getStaticProps`를 사용할 수 있습니다:

```jsx filename="pages/500.js"
export async function getStaticProps() {
  const res = await fetch('https://api.example.com/support')
  const data = await res.json()

  return {
    props: { data },
  }
}

export default function Custom500({ data }) {
  return (
    <div>
      <h1>500 - 서버 에러가 발생했습니다</h1>
      <p>문제가 지속되면 고객 지원팀에 문의하세요:</p>
      <p>이메일: {data.supportEmail}</p>
      <p>전화: {data.supportPhone}</p>
    </div>
  )
}
```

## 예제

### 기본 500 페이지

```jsx filename="pages/500.js"
import Link from 'next/link'

export default function Custom500() {
  return (
    <div className="error-container">
      <h1>500</h1>
      <h2>서버 에러가 발생했습니다</h2>
      <p>죄송합니다. 서버에서 문제가 발생했습니다.</p>
      <p>잠시 후 다시 시도해주세요.</p>
      <Link href="/">
        홈으로 돌아가기
      </Link>
    </div>
  )
}
```

### 새로고침 버튼이 포함된 500 페이지

```jsx filename="pages/500.js"
import { useRouter } from 'next/router'

export default function Custom500() {
  const router = useRouter()

  const handleRefresh = () => {
    router.reload()
  }

  const handleGoBack = () => {
    router.back()
  }

  return (
    <div className="error-container">
      <h1>500 - 서버 에러</h1>
      <p>서버에서 문제가 발생했습니다. 잠시 후 다시 시도해주세요.</p>
      <div className="button-group">
        <button onClick={handleRefresh}>
          페이지 새로고침
        </button>
        <button onClick={handleGoBack}>
          이전 페이지로
        </button>
      </div>
    </div>
  )
}
```

### 에러 리포팅 기능이 포함된 500 페이지

```jsx filename="pages/500.js"
import { useState } from 'react'
import Link from 'next/link'

export default function Custom500() {
  const [reported, setReported] = useState(false)

  const handleReport = async () => {
    try {
      await fetch('/api/report-error', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          url: window.location.href,
          timestamp: new Date().toISOString(),
          userAgent: navigator.userAgent,
        }),
      })
      setReported(true)
    } catch (error) {
      console.error('에러 리포팅 실패:', error)
    }
  }

  return (
    <div className="error-container">
      <h1>500 - 서버 에러</h1>
      <p>죄송합니다. 서버에서 예상치 못한 오류가 발생했습니다.</p>

      {reported ? (
        <p className="success-message">
          문제가 보고되었습니다. 감사합니다!
        </p>
      ) : (
        <button onClick={handleReport}>
          이 문제 보고하기
        </button>
      )}

      <Link href="/">
        홈으로 돌아가기
      </Link>
    </div>
  )
}
```

### 스타일이 적용된 500 페이지

```jsx filename="pages/500.js"
import Link from 'next/link'
import styles from '../styles/Error.module.css'

export default function Custom500() {
  return (
    <div className={styles.container}>
      <div className={styles.errorBox}>
        <div className={styles.errorCode}>500</div>
        <h1 className={styles.title}>서버 에러</h1>
        <p className={styles.description}>
          서버에서 문제가 발생했습니다.
          <br />
          잠시 후 다시 시도해주세요.
        </p>
        <div className={styles.actions}>
          <Link href="/" className={styles.homeButton}>
            홈으로
          </Link>
          <Link href="/contact" className={styles.contactButton}>
            문의하기
          </Link>
        </div>
      </div>
    </div>
  )
}
```

## 500 vs _error.js

| 특징 | 500.js | _error.js |
|------|--------|-----------|
| 생성 시점 | 빌드 시 정적 생성 | 런타임 |
| Data Fetching | `getStaticProps` 지원 | 지원 안 함 |
| 에러 정보 접근 | 제한적 | `statusCode`, `err` 객체 접근 가능 |
| 클라이언트 에러 | 처리 안 함 | 처리 가능 |
| 사용 환경 | 프로덕션 + 개발 | 프로덕션만 |

## 참고사항

- 500 페이지는 빌드 시 정적으로 생성됩니다.
- 매 방문 시마다 서버 렌더링하지 않아 서버 부하를 줄입니다.
- `getStaticProps`를 사용하여 빌드 시 데이터를 페칭할 수 있습니다.
- `getServerSideProps`는 500 페이지에서 사용할 수 없습니다.
- 더 세밀한 에러 처리가 필요하면 `_error.js`를 사용하세요.

## 관련 문서

- [404.js](/docs/pages/api-reference/file-conventions/404) - 404 에러 페이지
- [_error.js](/docs/pages/api-reference/file-conventions/_error) - 커스텀 에러 페이지
